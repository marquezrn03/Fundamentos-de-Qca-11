<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercicis Resolts: Àcid-Base i Solubilitat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; background-color: #f8fafc; }
        label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151; font-size: 0.875rem; }
        input[type="number"], select { padding: 0.5rem; border: 1px solid #D1D5DB; border-radius: 0.375rem; width: 100%; }
        button { background-color: #38bdf8; color: #0c4a6e; padding: 0.5rem 1rem; border-radius: 0.375rem; font-weight: 600; transition: background-color 0.2s; display: inline-block; text-align: center; border: none; cursor: pointer;}
        button:hover { background-color: #0ea5e9; }
        h1 { color: #111827; font-size: 1.875rem; line-height: 2.25rem; font-weight: 700;}
        h2 { color: #0c4a6e; font-size: 1.6rem; line-height: 2.1rem; font-weight: 700; border-bottom: 3px solid #7dd3fc; padding-bottom: 0.5rem; margin-top: 2.5rem; margin-bottom: 1.5rem; }
        h3 { color: #0369a1; font-size: 1.25rem; line-height: 1.75rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; border-bottom: 1px solid #bae6fd; padding-bottom: 0.25rem; }
        h4 { color: #075985; font-size: 1.1rem; line-height: 1.6rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.75rem;}
        p, li { color: #374151; line-height: 1.75; margin-bottom: 1rem; }
        strong { color: #1F2937; font-weight: 600; }
        .section-bg-light { background-color: #f0f9ff; }
        .section-bg-white { background-color: #FFFFFF; }
        .interactive-block { margin-top: 1.5rem; margin-bottom: 1.5rem; padding: 1.5rem; border: 1px solid #e0f2fe; border-radius: 0.5rem; background-color: #ffffff; box-shadow: inset 0 1px 3px rgba(0,0,0,0.05); }
        .interactive-block-light { margin-top: 1.5rem; margin-bottom: 1.5rem; padding: 1.5rem; border: 1px solid #e0f2fe; border-radius: 0.5rem; background-color: #f0f9ff; box-shadow: inset 0 1px 3px rgba(0,0,0,0.05); }
        .output-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-top: 1rem; }
        .output-item { background-color: #e0f2fe; border: 1px solid #bae6fd; border-radius: 0.375rem; padding: 0.75rem; text-align: center; }
        .output-label { display: block; font-size: 0.8rem; color: #075985; margin-bottom: 0.25rem; }
        .output-value { font-size: 1.1rem; font-weight: 600; color: #0c4a6e; word-wrap: break-word; }
        .output-unit { font-size: 0.75rem; color: #0369a1; margin-left: 0.25rem;}
        .error-text { color: #ef4444; font-weight: bold; }
        .math-block { margin: 1.5rem 0; padding: 1rem; background-color: #f0f9ff; border-left: 4px solid #38bdf8; font-size: 1.1rem; overflow-x: auto;}
        .footer-attribution { margin-top: 1.5rem; font-size: 0.875rem; line-height: 1.25rem; color: #6b7280; text-align: center; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 1rem; font-size: 0.9rem; }
        th, td { border: 1px solid #e0f2fe; padding: 0.5rem; text-align: left; }
        th { background-color: #f0f9ff; font-weight: 600; color: #0369a1; }
        tbody tr:nth-child(even) { background-color: #f0f9ff; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 antialiased">

    <header class="bg-gradient-to-r from-sky-600 to-cyan-600 text-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4">
            <h1 class="text-2xl md:text-3xl font-bold">Exercicis Resolts: Equilibri Àcid-Base i Solubilitat</h1>
        </div>
    </header>

    <main class="container mx-auto px-6 py-8">

        <section id="ex95" class="mb-12 p-6 rounded-lg shadow-lg section-bg-white">
            <h2 class="text-sky-700 border-b-2 border-sky-200 pb-2 mb-6">Exercici 95: pH d'una dissolució de lleixiu (NaClO)</h2>
            <p><strong>Enunciat:</strong> El lleixiu està composat principalment d'hipoclorit de sodi (NaClO). Aquest hipoclorit de sodi prové de la reacció de l'àcid hipoclorós (HClO) amb hidròxid de sodi (NaOH). Quin pH tindrà el punt d'equivalència d'aquesta reacció de neutralització? Argumenteu-ho. Calculeu també el pH d'aquesta solució de lleixiu si la concentració de NaClO és 0.2M. \(K_a(\text{HClO}) = 3.0 \times 10^{-8}\).</p>
            <h3>Resolució Pas a Pas</h3>
            <h4>a) pH al punt d'equivalència</h4>
            <p>Reacció: \( \text{HClO} + \text{NaOH} \rightarrow \text{NaClO} + \text{H}_2\text{O} \). En el punt d'equivalència, tenim una dissolució de NaClO. L'ió ClO⁻ és una base conjugada d'un àcid feble i s'hidrolitza: \( \text{ClO}^- + \text{H}_2\text{O} \rightleftharpoons \text{HClO} + \text{OH}^- \). La generació d'OH⁻ fa que el pH sigui <strong>bàsic (pH > 7)</strong>.</p>
            <h4>b) pH d'una dissolució 0.2M de NaClO</h4>
            <p>Càlcul de Kb: \( K_b = K_w / K_a = 10^{-14} / (3.0 \times 10^{-8}) \approx 3.33 \times 10^{-7} \)</p>
            <p>Equilibri d'hidròlisi: \( \text{ClO}^- + \text{H}_2\text{O} \rightleftharpoons \text{HClO} + \text{OH}^- \)</p>
            <p>Taula d'equilibri (conc. inicial ClO⁻ = 0.2 M):</p>
            <table><thead><tr><th></th><th>\( \text{ClO}^- \)</th><th>\( \text{HClO} \)</th><th>\( \text{OH}^- \)</th></tr></thead><tbody><tr><td>Inicial</td><td>0.2</td><td>0</td><td>0</td></tr><tr><td>Canvi</td><td>-x</td><td>+x</td><td>+x</td></tr><tr><td>Equilibri</td><td>0.2-x</td><td>x</td><td>x</td></tr></tbody></table>
            <p>Plantejament i aproximació (\(0.2-x \approx 0.2\) ja que \(C_s/K_b >> 100\)):</p>
            <div class="math-block"> $$ K_b = \frac{x^2}{0.2 - x} \approx \frac{x^2}{0.2} \implies x = \sqrt{K_b \times 0.2} $$
            $$ x = [\text{OH}^-] = \sqrt{(3.33 \times 10^{-7}) \times 0.2} \approx 2.58 \times 10^{-4} \, M $$ </div>
            <p>Càlcul de pOH i pH:</p>
            <div class="math-block"> $$ \text{pOH} = -\log_{10}(2.58 \times 10^{-4}) \approx 3.59 $$
            $$ \text{pH} = 14 - \text{pOH} \approx 10.41 $$ </div>
            <div class="interactive-block-light">
                 <h4 class="text-lg font-semibold mb-3 text-center text-sky-700">Calculadora Interactiva pH NaClO</h4>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                     <div><label for="ex95-conc">Concentració NaClO (M):</label><input type="number" id="ex95-conc" value="0.2" step="0.01" min="0.01"></div>
                     <div><label for="ex95-ka">Ka(HClO):</label><input type="number" id="ex95-ka" value="3.0e-8" step="1e-9"></div>
                 </div>
                 <div class="text-center mb-4"><button id="ex95-calc-btn">Calcular pH</button></div>
                 <div class="output-grid">
                     <div class="output-item"><span class="output-label">Kb(ClO⁻)</span><span class="output-value" id="ex95-res-kb">3.33e-7</span></div>
                     <div class="output-item"><span class="output-label">[OH⁻] (M)</span><span class="output-value" id="ex95-res-oh">2.58e-4</span></div>
                     <div class="output-item"><span class="output-label">pOH</span><span class="output-value" id="ex95-res-poh">3.59</span></div>
                     <div class="output-item"><span class="output-label">pH</span><span class="output-value" id="ex95-res-ph">10.41</span></div>
                 </div>
                 <div id="ex95-error" class="mt-4 text-center text-red-600 font-medium" style="min-height: 1.5rem;"></div>
            </div>
        </section>

        <section id="ex97" class="mb-12 p-6 rounded-lg shadow-lg section-bg-light">
            <h2 class="text-sky-700 border-b-2 border-sky-200 pb-2 mb-6">Exercici 97: pH i Grau d'Hidròlisi de CH₃COONa</h2>
             <p><strong>Enunciat:</strong> Calculeu el pH i el grau d'hidròlisi d'una dissolució d'acetat de sodi (CH₃COONa) que es produeix de la reacció de l'àcid acètic i l'hidròxid de sodi, sabent que la concentració d'acetat inicial és 0,5 M. \(K_a(\text{àcid acètic}) = 1.8 \times 10^{-5}\).</p>
             <h3>Resolució Pas a Pas</h3>
             <p>Hidròlisi de l'ió acetat: \( \text{CH}_3\text{COO}^- + \text{H}_2\text{O} \rightleftharpoons \text{CH}_3\text{COOH} + \text{OH}^- \)</p>
             <p>Càlcul de Kb: \( K_b = K_w / K_a = 10^{-14} / (1.8 \times 10^{-5}) \approx 5.56 \times 10^{-10} \)</p>
             <p>Equilibri (Conc. inicial CH₃COO⁻ = 0.5 M): \( K_b = \frac{x^2}{0.5 - x} \approx \frac{x^2}{0.5} \)</p>
             <p>Càlcul de x = [OH⁻]: \( x = \sqrt{K_b \times 0.5} = \sqrt{(5.56 \times 10^{-10}) \times 0.5} \approx 1.67 \times 10^{-5} \, M \)</p>
             <p>Càlcul de pOH i pH: \( \text{pOH} = -\log_{10}(1.67 \times 10^{-5}) \approx 4.78 \), \( \text{pH} = 14 - 4.78 \approx 9.22 \)</p>
             <p>Grau d'hidròlisi: \( \alpha = x / C_s = (1.67 \times 10^{-5}) / 0.5 \approx 3.34 \times 10^{-5} \)</p>
            <div class="interactive-block">
                 <h4 class="text-lg font-semibold mb-3 text-center text-sky-700">Calculadora Interactiva pH i Hidròlisi CH₃COONa</h4>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                     <div><label for="ex97-conc">Concentració CH₃COONa (M):</label><input type="number" id="ex97-conc" value="0.5" step="0.05" min="0.01"></div>
                     <div><label for="ex97-ka">Ka(CH₃COOH):</label><input type="number" id="ex97-ka" value="1.8e-5" step="1e-6"></div>
                 </div>
                 <div class="text-center mb-4"><button id="ex97-calc-btn">Calcular pH i α</button></div>
                 <div class="output-grid">
                     <div class="output-item"><span class="output-label">Kb(CH₃COO⁻)</span><span class="output-value" id="ex97-res-kb">5.56e-10</span></div>
                     <div class="output-item"><span class="output-label">[OH⁻] (M)</span><span class="output-value" id="ex97-res-oh">1.67e-5</span></div>
                     <div class="output-item"><span class="output-label">pH</span><span class="output-value" id="ex97-res-ph">9.22</span></div>
                     <div class="output-item"><span class="output-label">Grau Hidròlisi (α)</span><span class="output-value" id="ex97-res-alpha">3.34e-5</span></div>
                 </div>
                 <div id="ex97-error" class="mt-4 text-center text-red-600 font-medium" style="min-height: 1.5rem;"></div>
            </div>
        </section>

        <section id="ex105" class="mb-12 p-6 rounded-lg shadow-lg section-bg-white">
            <h2 class="text-sky-700 border-b-2 border-sky-200 pb-2 mb-6">Exercici 105: Kps i Solubilitat de Ag₃PO₄ vs T</h2>
            <p><strong>Enunciat Original:</strong> La solubilitat del fosfat de plata (Ag₃PO₄) en aigua a 25°C és de \(6.5 \times 10^{-3}\) g/L. Calculeu el seu producte de solubilitat (Kps) i la concentració molar d'ions plata dissolts. (MM Ag₃PO₄ ≈ 418.58 g/mol).</p>
            <p><strong>Aplicació Interactiva:</strong> Explora com canvia conceptualment el Kps i la solubilitat amb la temperatura (assumint una relació simple).</p>
            <h3>Resolució Pas a Pas (a partir de Kps(T))</h3>
            <p>Equilibri: \( \text{Ag}_3\text{PO}_4(s) \rightleftharpoons 3\text{Ag}^+(aq) + \text{PO}_4^{3-}(aq) \)</p>
            <p>Relació Kps i solubilitat (s): \( K_{ps} = [\text{Ag}^+]^3 [\text{PO}_4^{3-}] = (3s)^3 (s) = 27s^4 \)</p>
            <p>Solubilitat molar: \( s = \sqrt[4]{\frac{K_{ps}(T)}{27}} \)</p>
            <p>Concentracions iòniques: \( [\text{Ag}^+] = 3s \), \( [\text{PO}_4^{3-}] = s \)</p>
            <div class="interactive-block-light">
                 <h4 class="text-lg font-semibold mb-3 text-center text-sky-700">Calculadora Interactiva Solubilitat Ag₃PO₄ vs T</h4>
                 <div class="grid grid-cols-1 gap-4 mb-4">
                      <div>
                         <label for="ex105-temp">Temperatura (°C):</label>
                         <input type="number" id="ex105-temp" value="25" step="1">
                     </div>
                 </div>
                 <div class="text-center mb-4"><button id="ex105-calc-btn">Calcular Kps(T), s i Concentracions</button></div>
                 <div class="output-grid">
                     <div class="output-item"><span class="output-label">Kps(T) (Estimat)</span><span class="output-value" id="ex105-res-kps">1.56e-18</span></div>
                     <div class="output-item"><span class="output-label">Solubilitat (s, M)</span><span class="output-value" id="ex105-res-s">1.55e-5</span></div>
                     <div class="output-item"><span class="output-label">[Ag⁺] (M)</span><span class="output-value" id="ex105-res-ag">4.65e-5</span></div>
                     <div class="output-item"><span class="output-label">[PO₄³⁻] (M)</span><span class="output-value" id="ex105-res-po4">1.55e-5</span></div>
                 </div>
                 <p class="text-xs text-center mt-2 text-gray-500">Nota: La dependència Kps(T) és conceptual (\(K_{ps}(T) = 1.56 \times 10^{-18} \times 10^{0.02(T-25)}\)).</p>
                  <div id="ex105-error" class="mt-4 text-center text-red-600 font-medium" style="min-height: 1.5rem;"></div>
            </div>
        </section>

         <section id="ex106" class="mb-12 p-6 rounded-lg shadow-lg section-bg-light">
             <h2 class="text-sky-700 border-b-2 border-sky-200 pb-2 mb-6">Exercici 106: Precipitació de AgCl</h2>
             <p><strong>Enunciat:</strong> Es mesclen 50 mL de clorur sòdic 0,2M amb 50 mL de nitrat de plata 0,02M. Si el producte de solubilitat del clorur de plata val \(K_{ps}(\text{AgCl}) = 1.7 \times 10^{-10}\) a una determinada temperatura, calculeu: a) quants g de clorur de plata precipitaran de la solució b) quina concentració molar de catió plata hi haurà a la solució després que s'hagi format el precipitat. (MM AgCl ≈ 143.32 g/mol).</p>
             <h3>Resolució Pas a Pas</h3>
             <p>1. Mols inicials: \( n(\text{Cl}^-) = 0.05 L \times 0.2 M = 0.01 \) mol; \( n(\text{Ag}^+) = 0.05 L \times 0.02 M = 0.001 \) mol.</p>
             <p>2. Concentracions inicials (Vtotal=0.1L): \( [\text{Cl}^-]_0 = 0.1 M \); \( [\text{Ag}^+]_0 = 0.01 M \).</p>
             <p>3. Producte iònic: \( Q_{ps} = (0.01)(0.1) = 10^{-3} \). Com \( Q_{ps} > K_{ps} \), precipita AgCl.</p>
             <p>4. Precipitació (Ag⁺ limitant): Mols AgCl = 0.001 mol. Massa AgCl = \( 0.001 \times 143.32 \approx 0.143 \, g \).</p>
             <p>5. [Ag⁺] en equilibri: Després de precipitar, \( [\text{Cl}^-] \approx (0.01 - 0.001) / 0.1 = 0.09 \, M \). \( K_{ps} = [\text{Ag}^+][\text{Cl}^-] \implies [\text{Ag}^+] = K_{ps} / 0.09 = (1.7 \times 10^{-10}) / 0.09 \approx 1.89 \times 10^{-9} \, M \).</p>
             <div class="interactive-block">
                  <h4 class="text-lg font-semibold mb-3 text-center text-sky-700">Simulador Precipitació AgCl</h4>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                      <div><label for="ex106-v-nacl">V NaCl (mL):</label><input type="number" id="ex106-v-nacl" value="50" step="1"></div>
                      <div><label for="ex106-c-nacl">[NaCl] (M):</label><input type="number" id="ex106-c-nacl" value="0.2" step="0.01"></div>
                      <div><label for="ex106-v-agno3">V AgNO₃ (mL):</label><input type="number" id="ex106-v-agno3" value="50" step="1"></div>
                      <div><label for="ex106-c-agno3">[AgNO₃] (M):</label><input type="number" id="ex106-c-agno3" value="0.02" step="0.001"></div>
                      <div><label for="ex106-kps">Kps(AgCl):</label><input type="number" id="ex106-kps" value="1.7e-10" step="1e-11"></div>
                      <div><label for="ex106-mm-agcl">MM AgCl (g/mol):</label><input type="number" id="ex106-mm-agcl" value="143.32" step="0.01"></div>
                  </div>
                  <div class="text-center mb-4"><button id="ex106-calc-btn">Calcular Precipitació</button></div>
                  <div class="output-grid">
                      <div class="output-item"><span class="output-label">Qps Inicial</span><span class="output-value" id="ex106-res-qps">1.00e-3</span></div>
                      <div class="output-item"><span class="output-label">Precipita?</span><span class="output-value" id="ex106-res-precipita">Sí</span></div>
                      <div class="output-item"><span class="output-label">Massa AgCl (g)</span><span class="output-value" id="ex106-res-massa">0.143</span></div>
                      <div class="output-item"><span class="output-label">[Ag⁺] final (M)</span><span class="output-value" id="ex106-res-ag-final">1.89e-9</span></div>
                  </div>
                   <div id="ex106-error" class="mt-4 text-center text-red-600 font-medium" style="min-height: 1.5rem;"></div>
             </div>
         </section>

         <section id="ex107" class="mb-12 p-6 rounded-lg shadow-lg section-bg-white">
             <h2 class="text-sky-700 border-b-2 border-sky-200 pb-2 mb-6">Exercici 107: Solubilitat de CaF₂</h2>
             <p><strong>Enunciat:</strong> Es disposa d'una solució saturada de fluorur càlcic (CaF₂). Si el seu producte de solubilitat val \(K_{ps} = 3.9 \times 10^{-11}\), calculeu: a) la solubilitat del fluorur càlcic i les concentracions molars d'anió fluorur i de catió calci.</p>
             <h3>Resolució Pas a Pas</h3>
             <p>Equilibri: \( \text{CaF}_2(s) \rightleftharpoons \text{Ca}^{2+}(aq) + 2\text{F}^-(aq) \)</p>
             <p>Concentracions: \( [\text{Ca}^{2+}] = s \); \( [\text{F}^{-}] = 2s \)</p>
             <p>Kps: \( K_{ps} = [\text{Ca}^{2+}][\text{F}^{-}]^2 = (s)(2s)^2 = 4s^3 \)</p>
             <p>Càlcul de s: \( s = \sqrt[3]{K_{ps}/4} = \sqrt[3]{(3.9 \times 10^{-11})/4} \approx 2.14 \times 10^{-4} \, M \)</p>
             <p>Concentracions iòniques: \( [\text{Ca}^{2+}] = s \approx 2.14 \times 10^{-4} \, M \); \( [\text{F}^{-}] = 2s \approx 4.28 \times 10^{-4} \, M \)</p>
             <div class="interactive-block-light">
                  <h4 class="text-lg font-semibold mb-3 text-center text-sky-700">Calculadora Interactiva Solubilitat CaF₂</h4>
                  <div class="grid grid-cols-1 gap-4 mb-4">
                      <div>
                          <label for="ex107-kps">Kps(CaF₂):</label>
                          <input type="number" id="ex107-kps" value="3.9e-11" step="1e-12">
                      </div>
                  </div>
                  <div class="text-center mb-4"><button id="ex107-calc-btn">Calcular Solubilitat i Concentracions</button></div>
                  <div class="output-grid">
                      <div class="output-item"><span class="output-label">Solubilitat (s, M)</span><span class="output-value" id="ex107-res-s">2.14e-4</span></div>
                      <div class="output-item"><span class="output-label">[Ca²⁺] (M)</span><span class="output-value" id="ex107-res-ca">2.14e-4</span></div>
                      <div class="output-item"><span class="output-label">[F⁻] (M)</span><span class="output-value" id="ex107-res-f">4.27e-4</span></div>
                  </div>
                   <div id="ex107-error" class="mt-4 text-center text-red-600 font-medium" style="min-height: 1.5rem;"></div>
             </div>
         </section>

    </main>

     <footer class="mt-16 pt-8 border-t border-gray-300 text-sm text-gray-600">
         <p class="footer-attribution">Exercicis Resolts: Equilibri Àcid-Base i Solubilitat</p>
     </footer>

    <script>
        const Kw = 1.0e-14;

        function calculateEx95() {
            const concEl = document.getElementById('ex95-conc');
            const kaEl = document.getElementById('ex95-ka');
            const errorDiv = document.getElementById('ex95-error');
            const kbRes = document.getElementById('ex95-res-kb');
            const ohRes = document.getElementById('ex95-res-oh');
            const pohRes = document.getElementById('ex95-res-poh');
            const phRes = document.getElementById('ex95-res-ph');
            if(!concEl || !kaEl || !errorDiv || !kbRes || !ohRes || !pohRes || !phRes) return;
            errorDiv.textContent = '';
            try {
                const conc = parseFloat(concEl.value);
                const ka = parseFloat(kaEl.value);
                if (isNaN(conc) || isNaN(ka) || conc <= 0 || ka <= 0) throw new Error("Entrada invàlida.");
                const kb = Kw / ka;
                const oh = (-kb + Math.sqrt(kb*kb + 4*kb*conc)) / 2;
                if (!isFinite(oh) || oh < 0) throw new Error("Càlcul [OH⁻] invàlid.");
                const poh = -Math.log10(oh);
                const ph = 14 - poh;
                kbRes.textContent = kb.toExponential(2);
                ohRes.textContent = oh.toExponential(2);
                pohRes.textContent = poh.toFixed(2);
                phRes.textContent = ph.toFixed(2);
            } catch(e) {
                errorDiv.textContent = e.message;
                kbRes.textContent = "Error"; ohRes.textContent = "Error"; pohRes.textContent = "Error"; phRes.textContent = "Error";
            }
        }

        function calculateEx97() {
            const concEl = document.getElementById('ex97-conc');
            const kaEl = document.getElementById('ex97-ka');
            const errorDiv = document.getElementById('ex97-error');
            const kbRes = document.getElementById('ex97-res-kb');
            const ohRes = document.getElementById('ex97-res-oh');
            const pohRes = document.getElementById('ex97-res-poh');
            const phRes = document.getElementById('ex97-res-ph');
            const alphaRes = document.getElementById('ex97-res-alpha');
             if(!concEl || !kaEl || !errorDiv || !kbRes || !ohRes || !pohRes || !phRes || !alphaRes) return;
            errorDiv.textContent = '';
            try {
                const conc = parseFloat(concEl.value);
                const ka = parseFloat(kaEl.value);
                 if (isNaN(conc) || isNaN(ka) || conc <= 0 || ka <= 0) throw new Error("Entrada invàlida.");
                const kb = Kw / ka;
                const oh = (-kb + Math.sqrt(kb*kb + 4*kb*conc)) / 2;
                 if (!isFinite(oh) || oh < 0) throw new Error("Càlcul [OH⁻] invàlid.");
                const poh = -Math.log10(oh);
                const ph = 14 - poh;
                const alpha = oh / conc;
                kbRes.textContent = kb.toExponential(2);
                ohRes.textContent = oh.toExponential(2);
                pohRes.textContent = "N/A";
                phRes.textContent = ph.toFixed(2);
                alphaRes.textContent = alpha.toExponential(2);
            } catch(e) {
                 errorDiv.textContent = e.message;
                 kbRes.textContent = "Error"; ohRes.textContent = "Error"; pohRes.textContent = "Error"; phRes.textContent = "Error"; alphaRes.textContent = "Error";
            }
        }

         function calculateEx105() {
            const tempEl = document.getElementById('ex105-temp');
            const errorDiv = document.getElementById('ex105-error');
            const kpsRes = document.getElementById('ex105-res-kps');
            const sRes = document.getElementById('ex105-res-s');
            const agRes = document.getElementById('ex105-res-ag');
            const po4Res = document.getElementById('ex105-res-po4');
             if(!tempEl || !errorDiv || !kpsRes || !sRes || !agRes || !po4Res) return;
            errorDiv.textContent = '';
            try {
                const tempC = parseFloat(tempEl.value);
                if (isNaN(tempC)) throw new Error("Temperatura invàlida.");

                const kps_ref = 1.56e-18;
                const temp_ref = 25;
                const factor_temp = 0.02;
                const kps = kps_ref * Math.pow(10, factor_temp * (tempC - temp_ref));

                if (kps <= 0 || !isFinite(kps)) throw new Error("Kps calculat invàlid.");

                const s = Math.pow(kps / 27, 1/4);
                const ag_conc = 3 * s;
                const po4_conc = s;
                 if (!isFinite(s) || !isFinite(ag_conc) || !isFinite(po4_conc)) throw new Error("Càlcul invàlid.");
                kpsRes.textContent = kps.toExponential(2);
                sRes.textContent = s.toExponential(2);
                agRes.textContent = ag_conc.toExponential(2);
                po4Res.textContent = po4_conc.toExponential(2);
            } catch(e) {
                errorDiv.textContent = e.message;
                 kpsRes.textContent = "Error"; sRes.textContent = "Error"; agRes.textContent = "Error"; po4Res.textContent = "Error";
             }
        }

         function calculateEx106() {
            const vNaclEl = document.getElementById('ex106-v-nacl');
            const cNaclEl = document.getElementById('ex106-c-nacl');
            const vAgno3El = document.getElementById('ex106-v-agno3');
            const cAgno3El = document.getElementById('ex106-c-agno3');
            const kpsEl = document.getElementById('ex106-kps');
            const mmAgclEl = document.getElementById('ex106-mm-agcl');
            const errorDiv = document.getElementById('ex106-error');
            const qpsRes = document.getElementById('ex106-res-qps');
            const precipitaRes = document.getElementById('ex106-res-precipita');
            const massaRes = document.getElementById('ex106-res-massa');
            const agFinalRes = document.getElementById('ex106-res-ag-final');
            if(!vNaclEl || !cNaclEl || !vAgno3El || !cAgno3El || !kpsEl || !mmAgclEl || !errorDiv || !qpsRes || !precipitaRes || !massaRes || !agFinalRes) return;
            errorDiv.textContent = '';

            try {
                const v_nacl_ml = parseFloat(vNaclEl.value);
                const c_nacl = parseFloat(cNaclEl.value);
                const v_agno3_ml = parseFloat(vAgno3El.value);
                const c_agno3 = parseFloat(cAgno3El.value);
                const kps = parseFloat(kpsEl.value);
                const mm_agcl = parseFloat(mmAgclEl.value);

                if (isNaN(v_nacl_ml) || isNaN(c_nacl) || isNaN(v_agno3_ml) || isNaN(c_agno3) || isNaN(kps) || isNaN(mm_agcl) ||
                    v_nacl_ml <= 0 || c_nacl <= 0 || v_agno3_ml <= 0 || c_agno3 <= 0 || kps <= 0 || mm_agcl <= 0) throw new Error("Entrada invàlida.");

                const v_total_l = (v_nacl_ml + v_agno3_ml) / 1000;
                if (v_total_l <= 0) throw new Error("Volum total invàlid.");

                const n_cl_init = (v_nacl_ml / 1000) * c_nacl;
                const n_ag_init = (v_agno3_ml / 1000) * c_agno3;
                const c_cl_0 = n_cl_init / v_total_l;
                const c_ag_0 = n_ag_init / v_total_l;

                const qps = c_ag_0 * c_cl_0;
                const precipita = qps > kps;
                let massa_agcl = 0;
                let ag_final = c_ag_0;
                let cl_final = c_cl_0;

                if (precipita) {
                    const n_precip = Math.min(n_ag_init, n_cl_init);
                    massa_agcl = n_precip * mm_agcl;
                    const n_ag_remaining = n_ag_init - n_precip;
                    const n_cl_remaining = n_cl_init - n_precip;
                    const c_cl_excess = n_cl_remaining / v_total_l;
                    const c_ag_excess = n_ag_remaining / v_total_l;

                    if (c_cl_excess > 1e-9) {
                         ag_final = kps / c_cl_excess;
                    } else if (c_ag_excess > 1e-9) {
                         ag_final = c_ag_excess;
                    } else {
                         ag_final = Math.sqrt(kps);
                    }
                    cl_final = c_cl_excess + ag_final;
                }

                qpsRes.textContent = qps.toExponential(2);
                precipitaRes.textContent = precipita ? "Sí" : "No";
                massaRes.textContent = massa_agcl.toFixed(3);
                agFinalRes.textContent = ag_final.toExponential(2);

            } catch(e) {
                 errorDiv.textContent = e.message;
                 qpsRes.textContent = "Error"; precipitaRes.textContent = "Error"; massaRes.textContent = "Error"; agFinalRes.textContent = "Error";
            }
        }

         function calculateEx107() {
            const kpsEl = document.getElementById('ex107-kps');
            const errorDiv = document.getElementById('ex107-error');
            const sRes = document.getElementById('ex107-res-s');
            const caRes = document.getElementById('ex107-res-ca');
            const fRes = document.getElementById('ex107-res-f');
             if(!kpsEl || !errorDiv || !sRes || !caRes || !fRes) return;
            errorDiv.textContent = '';
             try {
                 const kps = parseFloat(kpsEl.value);
                 if (isNaN(kps) || kps <= 0) throw new Error("Kps invàlid.");
                 const s = Math.cbrt(kps / 4);
                 const ca_conc = s;
                 const f_conc = 2 * s;
                 if (!isFinite(s) || !isFinite(ca_conc) || !isFinite(f_conc)) throw new Error("Càlcul invàlid.");
                 sRes.textContent = s.toExponential(2);
                 caRes.textContent = ca_conc.toExponential(2);
                 fRes.textContent = f_conc.toExponential(2);
             } catch(e) {
                 errorDiv.textContent = e.message;
                 sRes.textContent = "Error"; caRes.textContent = "Error"; fRes.textContent = "Error";
             }
         }

        document.getElementById('ex95-calc-btn')?.addEventListener('click', calculateEx95);
        document.getElementById('ex97-calc-btn')?.addEventListener('click', calculateEx97);
        document.getElementById('ex105-calc-btn')?.addEventListener('click', calculateEx105);
        document.getElementById('ex106-calc-btn')?.addEventListener('click', calculateEx106);
        document.getElementById('ex107-calc-btn')?.addEventListener('click', calculateEx107);

        window.addEventListener('load', () => {
            calculateEx95();
            calculateEx97();
            calculateEx105();
            calculateEx106();
            calculateEx107();
        });

    </script>

</body>
</html>

